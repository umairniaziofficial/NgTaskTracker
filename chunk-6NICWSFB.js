import{a as W}from"./chunk-H5TF32YI.js";import{a as X,b as Y,c as Z,d as ee}from"./chunk-LSDHHUPW.js";import{$ as S,Aa as h,Ca as A,Da as q,Ga as H,L as M,Ma as p,N as z,Oa as d,Pa as s,Ra as U,Sa as m,T as g,Ta as P,Va as a,Wa as D,Y as L,Z as N,_ as k,a as y,ab as b,b as O,bb as K,cb as $,da as w,fa as I,ib as J,j,ja as B,m as F,rb as G,sa as l,sb as Q,ta as V,x as R,xa as f}from"./chunk-7KOG6SPI.js";var C=class i{http=g(W);StorageKey="TODO_LOCAL";todoItemsSubject=new j([]);todoItems$=this.todoItemsSubject.asObservable();constructor(){this.loadTodoItems()}loadTodoItems(){let e=this.loadFromLocalStorage();e?this.todoItemsSubject.next(this.sortTodosByID(e)):this.fetchTodoItemsFromAPI()}fetchTodoItemsFromAPI(){this.http.get("https://jsonplaceholder.typicode.com/todos").pipe(R(t=>(console.error("Error fetching todo items from API:",t),F([])))).subscribe(t=>{let o=this.sortTodosByID(t);this.todoItemsSubject.next(o.slice(0,10)),this.saveToLocalStorage(o)})}addTodo(e){let t=this.todoItemsSubject.getValue(),o={id:this.getNextId(t),title:e,completed:!1,userId:1},n=this.sortTodosByID([...t,o]);this.todoItemsSubject.next(n),this.saveToLocalStorage(n)}sortTodosByID(e){return e.sort((t,o)=>t.id-o.id)}deleteTodo(e){let t=this.todoItemsSubject.getValue(),o=this.sortTodosByID(t.filter(n=>n.id!==e));this.todoItemsSubject.next(o),this.saveToLocalStorage(o)}getNextId(e){return e.length?Math.max(...e.map(t=>t.id))+1:1}saveToLocalStorage(e){localStorage.setItem(this.StorageKey,JSON.stringify(e))}loadFromLocalStorage(){let e=localStorage.getItem(this.StorageKey);return e?JSON.parse(e):null}updateTodo(e,t){let n=this.todoItemsSubject.getValue().map(u=>u.id===e?O(y({},u),{completed:t}):u),r=this.sortTodosByID(n);this.todoItemsSubject.next(r),this.saveToLocalStorage(r)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})};var x=class i{constructor(e){this.elementRef=e;this.el=this.elementRef.nativeElement}isCompleted=!1;el;ngOnChanges(e){e.isCompleted&&this.applyHighlight()}applyHighlight(){this.el.style.backgroundColor=this.isCompleted?"#2A3439":""}static \u0275fac=function(t){return new(t||i)(V(B))};static \u0275dir=A({type:i,selectors:[["","appHighlightCompletedTodo",""]],inputs:{isCompleted:"isCompleted"},features:[N]})};var v=class i{todo;statusChange=new I;delete=new I;onCheckboxChange(e){let t=e.target;this.statusChange.emit({id:this.todo.id,completed:t.checked})}onDelete(){this.delete.emit(this.todo.id)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["app-todo-item"]],inputs:{todo:"todo"},outputs:{statusChange:"statusChange",delete:"delete"},decls:11,vars:6,consts:[["appHighlightCompletedTodo","",1,"task-item",3,"isCompleted"],["type","checkbox",3,"change","checked"],[1,"delete-button",3,"click"]],template:function(t,o){t&1&&(d(0,"div",0)(1,"div"),a(2),s(),d(3,"div"),a(4),b(5,"uppercase"),s(),d(6,"div")(7,"input",1),m("change",function(r){return o.onCheckboxChange(r)}),s()(),d(8,"div")(9,"button",2),m("click",function(){return o.onDelete()}),a(10,"Delete"),s()()()),t&2&&(p("isCompleted",o.todo.completed),l(2),D(o.todo.id),l(2),D(K(5,4,o.todo.title)),l(3),p("checked",o.todo.completed))},dependencies:[x,Q],styles:[".task-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:.5fr 2fr .8fr .8fr;align-items:center;padding:15px;border-radius:8px;background-color:#2e2e2e;border:1px solid rgba(255,255,255,.1);font-size:.9rem;transition:background-color .3s}.task-item[_ngcontent-%COMP%]:hover{background-color:#333}.task-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.task-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){text-align:left}.task-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.task-item[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{padding:6px 12px;background-color:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:.8rem;transition:background-color .3s}.task-item[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333}@media screen and (max-width: 768px){.task-item[_ngcontent-%COMP%]{font-size:.8rem;padding:12px}.task-item[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{padding:5px 10px;font-size:.75rem}.task-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:14px;height:14px}}@media screen and (max-width: 576px){.task-item[_ngcontent-%COMP%]{grid-template-columns:.5fr 1.5fr .5fr .5fr;font-size:.75rem;padding:10px;gap:5px}.task-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:3px}.task-item[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{padding:4px 8px;font-size:.7rem}}@media screen and (max-width: 360px){.task-item[_ngcontent-%COMP%]{font-size:.7rem}.task-item[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{padding:3px 6px}}"]})};var _=class i{transform(e,t){if(!t)return e;let o=t.toLowerCase();return e.filter(n=>n.title.toLowerCase().includes(o)||n.id.toString().includes(o))}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=q({name:"filterTodo",type:i,pure:!0})};function E(i,e){let t=!e?.manualCleanup;t&&!e?.injector&&L(E);let o=t?e?.injector?.get(w)??g(w):null,n=ne(e?.equal),r;e?.requireSync?r=f({kind:0},{equal:n}):r=f({kind:1,value:e?.initialValue},{equal:n});let u=i.subscribe({next:c=>r.set({kind:1,value:c}),error:c=>{if(e?.rejectErrors)throw c;r.set({kind:2,error:c})}});if(e?.requireSync&&r().kind===0)throw new M(601,!1);return o?.onDestroy(u.unsubscribe.bind(u)),J(()=>{let c=r();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new M(601,!1)}},{equal:e?.equal})}function ne(i=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&i(e.value,t.value)}function ie(i,e){if(i&1){let t=U();d(0,"app-todo-item",8),m("statusChange",function(n){k(t);let r=P();return S(r.updateTodoStatus(n.id,n.completed))})("delete",function(n){k(t);let r=P();return S(r.deleteTodo(n))}),s()}if(i&2){let t=e.$implicit;p("todo",t)}}var te=class i{todosService=g(C);todoItems=E(this.todosService.todoItems$,{initialValue:[]});searchTerm=f("");newTodoTitle=f("");ngOnInit(){}trackById(e,t){return t.id}updateTodoStatus(e,t){this.todosService.updateTodo(e,t)}addTodo(){let e=this.newTodoTitle().trim();e&&(this.todosService.addTodo(e),this.newTodoTitle.set(""))}deleteTodo(e){this.todosService.deleteTodo(e)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["app-todos"]],decls:20,vars:7,consts:[[1,"todos-container"],[1,"add-todo-container"],["type","text","placeholder","Enter new todo title",1,"inputField",3,"ngModelChange","keyup.enter","ngModel"],[1,"add-button",3,"click"],["type","search","placeholder","Enter the Search Value",1,"inputField",3,"ngModelChange","ngModel"],[1,"todo-header"],[1,"task-container"],[3,"todo","statusChange","delete",4,"ngFor","ngForOf","ngForTrackBy"],[3,"statusChange","delete","todo"]],template:function(t,o){t&1&&(d(0,"div",0)(1,"h4"),a(2,"Todo List"),s(),d(3,"div",1)(4,"input",2),m("ngModelChange",function(r){return o.newTodoTitle.set(r)})("keyup.enter",function(){return o.addTodo()}),s(),d(5,"button",3),m("click",function(){return o.addTodo()}),a(6,"Add Todo"),s()(),d(7,"input",4),m("ngModelChange",function(r){return o.searchTerm.set(r)}),s(),d(8,"div",5)(9,"div"),a(10,"ID"),s(),d(11,"div"),a(12,"Title"),s(),d(13,"div"),a(14,"Status"),s(),d(15,"div"),a(16,"Actions"),s()(),d(17,"div",6),H(18,ie,1,1,"app-todo-item",7),b(19,"filterTodo"),s()()),t&2&&(l(4),p("ngModel",o.newTodoTitle()),l(3),p("ngModel",o.searchTerm()),l(11),p("ngForOf",$(19,4,o.todoItems(),o.searchTerm()))("ngForTrackBy",o.trackById))},dependencies:[G,v,ee,X,Y,Z,_],styles:[".todos-container[_ngcontent-%COMP%]{max-width:1200px;width:95%;margin:0 auto;padding:20px;font-family:Arial,sans-serif;color:#fff}h4[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#f5f5f5;font-size:1.5rem}.add-todo-container[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:30px;gap:0}.add-todo-container[_ngcontent-%COMP%]   .inputField[_ngcontent-%COMP%]{flex:1;border-radius:8px 0 0 8px}.add-todo-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{min-width:100px;border:0;cursor:pointer;background-color:#4caf50;color:#fff;border-radius:0 8px 8px 0;font-size:14px;transition:background-color .3s}.add-todo-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]:hover{background-color:#45a049}.inputField[_ngcontent-%COMP%]{background-color:#393c3f;outline:none;color:#fff;width:100%;border:0;padding:12px 20px;font-size:14px;border-radius:8px}.inputField[_ngcontent-%COMP%]::placeholder{color:#a0a0a0}.todo-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:.5fr 2fr .8fr .8fr;align-items:center;padding:15px;border-radius:8px;background-color:#393c3f;margin:20px 0 10px;font-weight:700;font-size:.9rem}.todo-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;padding:5px}.task-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}@media screen and (max-width: 768px){.todos-container[_ngcontent-%COMP%]{width:98%;padding:15px}h4[_ngcontent-%COMP%]{font-size:1.3rem}.todo-header[_ngcontent-%COMP%]{font-size:.8rem;padding:12px}.inputField[_ngcontent-%COMP%]{font-size:13px;padding:10px 15px}}@media screen and (max-width: 576px){.add-todo-container[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.add-todo-container[_ngcontent-%COMP%]   .inputField[_ngcontent-%COMP%]{border-radius:8px}.add-todo-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{width:100%;padding:12px!important;border-radius:8px}.todo-header[_ngcontent-%COMP%]{grid-template-columns:.5fr 1.5fr .5fr .5fr;font-size:.75rem;padding:10px;gap:5px}}"]})};export{te as TodosComponent};
